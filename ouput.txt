============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.4.1, pluggy-1.6.0 -- /Users/barrymolina/.venvs/mathsfun/bin/python3.13
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: /Users/barrymolina/Projects/mathsfun
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.9.0, cov-6.2.1, mock-3.14.1, hypothesis-6.136.0
collecting ... collected 413 items

tests/config/test_container.py::TestContainerInit::test_init_creates_all_dependencies PASSED [  0%]
tests/config/test_container.py::TestContainerInit::test_init_repositories_use_supabase_manager PASSED [  0%]
tests/config/test_container.py::TestContainerInit::test_init_services_use_repositories PASSED [  0%]
tests/config/test_container.py::TestContainerInit::test_init_dependency_chain PASSED [  0%]
tests/config/test_container.py::TestContainerProperties::test_user_repo_property PASSED [  1%]
tests/config/test_container.py::TestContainerProperties::test_quiz_repo_property PASSED [  1%]
tests/config/test_container.py::TestContainerProperties::test_user_svc_property PASSED [  1%]
tests/config/test_container.py::TestContainerProperties::test_quiz_svc_property PASSED [  1%]
tests/config/test_container.py::TestContainerProperties::test_properties_return_same_instances PASSED [  2%]
tests/config/test_container.py::TestContainerDependencyInjection::test_single_supabase_manager_instance PASSED [  2%]
tests/config/test_container.py::TestContainerDependencyInjection::test_services_use_container_repositories PASSED [  2%]
tests/config/test_container.py::TestContainerDependencyInjection::test_dependency_isolation PASSED [  2%]
tests/config/test_container.py::TestContainerDependencyInjection::test_transitive_dependencies PASSED [  3%]
tests/config/test_container.py::TestContainerIntegration::test_container_provides_working_services PASSED [  3%]
tests/config/test_container.py::TestContainerIntegration::test_container_type_consistency PASSED [  3%]
tests/config/test_container.py::TestContainerIntegration::test_container_attribute_access PASSED [  3%]
tests/config/test_container.py::TestContainerIntegration::test_container_lazy_initialization PASSED [  4%]
tests/config/test_container.py::TestContainerEdgeCases::test_container_with_none_supabase_manager PASSED [  4%]
tests/config/test_container.py::TestContainerEdgeCases::test_multiple_property_access_performance PASSED [  4%]
tests/config/test_container.py::TestContainerEdgeCases::test_container_immutability_of_dependencies PASSED [  4%]
tests/config/test_container.py::TestContainerDocumentation::test_container_follows_dependency_injection_pattern PASSED [  5%]
tests/config/test_container.py::TestContainerDocumentation::test_container_provides_all_required_services PASSED [  5%]
tests/config/test_container.py::TestContainerDocumentation::test_container_maintains_single_responsibility PASSED [  5%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptInit::test_init_with_all_fields PASSED [  5%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptInit::test_init_without_user_answer PASSED [  6%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptInit::test_init_with_none_user_answer PASSED [  6%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptInit::test_init_incorrect_answer PASSED [  6%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptProperties::test_response_time_seconds_property PASSED [  6%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptProperties::test_response_time_seconds_zero_ms PASSED [  7%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptProperties::test_response_time_seconds_large_value PASSED [  7%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptProperties::test_response_time_seconds_fractional PASSED [  7%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptFromDict::test_from_dict_complete_data PASSED [  7%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptFromDict::test_from_dict_without_user_answer PASSED [  7%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptFromDict::test_from_dict_with_none_user_answer PASSED [  8%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptFromDict::test_from_dict_with_z_suffix_timestamp PASSED [  8%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptFromDict::test_from_dict_with_timezone_timestamp PASSED [  8%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptFromDict::test_from_dict_invalid_timestamp_format PASSED [  8%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptFromDict::test_from_dict_missing_required_field PASSED [  9%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptFromDict::test_from_dict_boolean_conversion PASSED [  9%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptToDict::test_to_dict_complete_attempt PASSED [  9%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptToDict::test_to_dict_without_user_answer PASSED [  9%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptToDict::test_to_dict_incorrect_attempt PASSED [ 10%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptToDict::test_to_dict_zero_response_time PASSED [ 10%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptRoundTrip::test_round_trip_conversion_complete PASSED [ 10%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptRoundTrip::test_round_trip_conversion_no_user_answer PASSED [ 10%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptRoundTrip::test_round_trip_preserves_properties PASSED [ 11%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptEdgeCases::test_very_large_response_time PASSED [ 11%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptEdgeCases::test_negative_numbers_in_problem PASSED [ 11%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptEdgeCases::test_complex_problem_text PASSED [ 11%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptEdgeCases::test_zero_values PASSED [ 12%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptDataclass::test_dataclass_equality PASSED [ 12%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptDataclass::test_dataclass_inequality PASSED [ 12%]
tests/domain/models/test_problem_attempt.py::TestProblemAttemptDataclass::test_dataclass_str_representation PASSED [ 12%]
tests/domain/models/test_quiz_session.py::TestQuizType::test_quiz_type_values PASSED [ 13%]
tests/domain/models/test_quiz_session.py::TestQuizType::test_quiz_type_from_string PASSED [ 13%]
tests/domain/models/test_quiz_session.py::TestQuizType::test_quiz_type_invalid_value PASSED [ 13%]
tests/domain/models/test_quiz_session.py::TestSessionStatus::test_session_status_values PASSED [ 13%]
tests/domain/models/test_quiz_session.py::TestSessionStatus::test_session_status_from_string PASSED [ 14%]
tests/domain/models/test_quiz_session.py::TestSessionStatus::test_session_status_invalid_value PASSED [ 14%]
tests/domain/models/test_quiz_session.py::TestQuizSessionInit::test_init_minimal_required_fields PASSED [ 14%]
tests/domain/models/test_quiz_session.py::TestQuizSessionInit::test_init_all_fields PASSED [ 14%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_accuracy_property_normal_case PASSED [ 15%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_accuracy_property_perfect_score PASSED [ 15%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_accuracy_property_zero_correct PASSED [ 15%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_accuracy_property_zero_problems PASSED [ 15%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_duration_seconds_property_with_end_time PASSED [ 15%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_duration_seconds_property_without_end_time PASSED [ 16%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_duration_seconds_property_same_start_end_time PASSED [ 16%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_is_completed_property_true PASSED [ 16%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_is_completed_property_false_active PASSED [ 16%]
tests/domain/models/test_quiz_session.py::TestQuizSessionProperties::test_is_completed_property_false_abandoned PASSED [ 17%]
tests/domain/models/test_quiz_session.py::TestQuizSessionFromDict::test_from_dict_minimal_data PASSED [ 17%]
tests/domain/models/test_quiz_session.py::TestQuizSessionFromDict::test_from_dict_complete_data PASSED [ 17%]
tests/domain/models/test_quiz_session.py::TestQuizSessionFromDict::test_from_dict_with_z_suffix_timestamps PASSED [ 17%]
tests/domain/models/test_quiz_session.py::TestQuizSessionFromDict::test_from_dict_with_timezone_timestamps PASSED [ 18%]
tests/domain/models/test_quiz_session.py::TestQuizSessionFromDict::test_from_dict_invalid_quiz_type PASSED [ 18%]
tests/domain/models/test_quiz_session.py::TestQuizSessionFromDict::test_from_dict_invalid_status PASSED [ 18%]
tests/domain/models/test_quiz_session.py::TestQuizSessionFromDict::test_from_dict_invalid_datetime_format PASSED [ 18%]
tests/domain/models/test_quiz_session.py::TestQuizSessionFromDict::test_from_dict_missing_required_field PASSED [ 19%]
tests/domain/models/test_quiz_session.py::TestQuizSessionToDict::test_to_dict_complete_session PASSED [ 19%]
tests/domain/models/test_quiz_session.py::TestQuizSessionToDict::test_to_dict_no_end_time PASSED [ 19%]
tests/domain/models/test_quiz_session.py::TestQuizSessionToDict::test_to_dict_minimal_session PASSED [ 19%]
tests/domain/models/test_quiz_session.py::TestQuizSessionRoundTrip::test_round_trip_conversion_complete PASSED [ 20%]
tests/domain/models/test_quiz_session.py::TestQuizSessionRoundTrip::test_round_trip_conversion_minimal PASSED [ 20%]
tests/domain/models/test_quiz_session.py::TestQuizSessionEdgeCases::test_accuracy_with_more_correct_than_total PASSED [ 20%]
tests/domain/models/test_quiz_session.py::TestQuizSessionEdgeCases::test_very_short_duration PASSED [ 20%]
tests/domain/models/test_quiz_session.py::TestQuizSessionEdgeCases::test_large_numbers PASSED [ 21%]
tests/domain/models/test_quiz_session.py::TestQuizSessionDataclass::test_dataclass_equality PASSED [ 21%]
tests/domain/models/test_quiz_session.py::TestQuizSessionDataclass::test_dataclass_inequality PASSED [ 21%]
tests/domain/models/test_quiz_session.py::TestQuizSessionDataclass::test_dataclass_str_representation PASSED [ 21%]
tests/domain/services/test_quiz_service.py::TestQuizServiceInit::test_init PASSED [ 22%]
tests/domain/services/test_quiz_service.py::TestStartQuizSession::test_start_quiz_session_success PASSED [ 22%]
tests/domain/services/test_quiz_service.py::TestStartQuizSession::test_start_quiz_session_repository_failure PASSED [ 22%]
tests/domain/services/test_quiz_service.py::TestStartQuizSession::test_start_quiz_session_invalid_quiz_type PASSED [ 22%]
tests/domain/services/test_quiz_service.py::TestRecordAnswer::test_record_answer_correct PASSED [ 23%]
tests/domain/services/test_quiz_service.py::TestRecordAnswer::test_record_answer_incorrect PASSED [ 23%]
tests/domain/services/test_quiz_service.py::TestRecordAnswer::test_record_answer_none_user_answer PASSED [ 23%]
tests/domain/services/test_quiz_service.py::TestRecordAnswer::test_record_answer_save_attempt_fails PASSED [ 23%]
tests/domain/services/test_quiz_service.py::TestRecordAnswer::test_record_answer_increment_stats_fails PASSED [ 23%]
tests/domain/services/test_quiz_service.py::TestCompleteSession::test_complete_session_success PASSED [ 24%]
tests/domain/services/test_quiz_service.py::TestCompleteSession::test_complete_session_no_attempts PASSED [ 24%]
tests/domain/services/test_quiz_service.py::TestCompleteSession::test_complete_session_only_incorrect_attempts PASSED [ 24%]
tests/domain/services/test_quiz_service.py::TestCompleteSession::test_complete_session_repository_failure PASSED [ 24%]
tests/domain/services/test_quiz_service.py::TestAbandonSession::test_abandon_session_success PASSED [ 25%]
tests/domain/services/test_quiz_service.py::TestAbandonSession::test_abandon_session_not_found PASSED [ 25%]
tests/domain/services/test_quiz_service.py::TestAbandonSession::test_abandon_session_update_fails PASSED [ 25%]
tests/domain/services/test_quiz_service.py::TestGetUserProgress::test_get_user_progress_with_sessions PASSED [ 25%]
tests/domain/services/test_quiz_service.py::TestGetUserProgress::test_get_user_progress_no_completed_sessions PASSED [ 26%]
tests/domain/services/test_quiz_service.py::TestGetUserProgress::test_get_user_progress_sessions_with_no_end_time PASSED [ 26%]
tests/domain/services/test_quiz_service.py::TestGetUserProgress::test_get_user_progress_zero_problems PASSED [ 26%]
tests/domain/services/test_quiz_service.py::TestGetSessionDetails::test_get_session_details_success PASSED [ 26%]
tests/domain/services/test_quiz_service.py::TestGetSessionDetails::test_get_session_details_session_not_found PASSED [ 27%]
tests/domain/services/test_quiz_service.py::TestGetSessionDetails::test_get_session_details_no_attempts PASSED [ 27%]
tests/domain/services/test_quiz_service.py::TestQuizSessionResultNamedTuple::test_quiz_session_result_creation PASSED [ 27%]
tests/domain/services/test_quiz_service.py::TestQuizSessionResultNamedTuple::test_quiz_session_result_fields PASSED [ 27%]
tests/domain/services/test_quiz_service.py::TestUserProgressNamedTuple::test_user_progress_creation PASSED [ 28%]
tests/domain/services/test_quiz_service.py::TestUserProgressNamedTuple::test_user_progress_fields PASSED [ 28%]
tests/domain/services/test_quiz_service.py::TestQuizServiceIntegration::test_all_methods_use_repository PASSED [ 28%]
tests/domain/services/test_user_service.py::TestUserServiceInit::test_init_sets_attributes_correctly PASSED [ 28%]
tests/domain/services/test_user_service.py::TestGetOrCreateUserProfile::test_get_existing_user_profile PASSED [ 29%]
tests/domain/services/test_user_service.py::TestGetOrCreateUserProfile::test_create_new_user_profile PASSED [ 29%]
tests/domain/services/test_user_service.py::TestGetOrCreateUserProfile::test_create_user_with_default_display_name PASSED [ 29%]
tests/domain/services/test_user_service.py::TestGetOrCreateUserProfile::test_creation_failed_fallback_to_existing PASSED [ 29%]
tests/domain/services/test_user_service.py::TestGetOrCreateUserProfile::test_creation_failed_no_fallback PASSED [ 30%]
tests/domain/services/test_user_service.py::TestGetOrCreateUserProfile::test_creation_successful_clears_cache PASSED [ 30%]
tests/domain/services/test_user_service.py::TestUpdateDisplayName::test_update_display_name_success PASSED [ 30%]
tests/domain/services/test_user_service.py::TestUpdateDisplayName::test_update_display_name_user_not_found PASSED [ 30%]
tests/domain/services/test_user_service.py::TestUpdateDisplayName::test_update_display_name_update_fails PASSED [ 30%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_not_authenticated PASSED [ 31%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_cached_without_force_refresh PASSED [ 31%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_force_refresh_with_profile PASSED [ 31%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_no_force_refresh_with_profile PASSED [ 31%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_force_refresh_no_auth_response PASSED [ 32%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_force_refresh_no_user_in_response PASSED [ 32%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_no_session PASSED [ 32%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_no_user_in_session PASSED [ 32%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_create_profile_from_auth_force_refresh PASSED [ 33%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_create_profile_from_auth_no_force_refresh PASSED [ 33%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_display_name_fallbacks PASSED [ 33%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_exception_handling PASSED [ 33%]
tests/domain/services/test_user_service.py::TestGetCurrentUser::test_get_current_user_force_refresh_different_user_id PASSED [ 34%]
tests/domain/services/test_user_service.py::TestClearUserCache::test_clear_user_cache PASSED [ 34%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestQuizRepositoryInit::test_init PASSED [ 34%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestCreateSession::test_create_session_success PASSED [ 34%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestCreateSession::test_create_session_not_authenticated PASSED [ 35%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestCreateSession::test_create_session_exception PASSED [ 35%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestCreateSession::test_create_session_no_data_returned PASSED [ 35%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetSession::test_get_session_success PASSED [ 35%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetSession::test_get_session_not_found PASSED [ 36%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetSession::test_get_session_not_authenticated PASSED [ 36%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetSession::test_get_session_exception PASSED [ 36%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestUpdateSession::test_update_session_success PASSED [ 36%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestUpdateSession::test_update_session_not_authenticated PASSED [ 37%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestUpdateSession::test_update_session_exception PASSED [ 37%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestUpdateSession::test_update_session_no_data_returned PASSED [ 37%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestCompleteSession::test_complete_session_success PASSED [ 37%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestCompleteSession::test_complete_session_not_authenticated PASSED [ 38%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestCompleteSession::test_complete_session_exception PASSED [ 38%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetUserSessions::test_get_user_sessions_success PASSED [ 38%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetUserSessions::test_get_user_sessions_with_status_filter PASSED [ 38%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetUserSessions::test_get_user_sessions_custom_limit PASSED [ 38%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetUserSessions::test_get_user_sessions_no_data PASSED [ 39%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetUserSessions::test_get_user_sessions_not_authenticated PASSED [ 39%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetUserSessions::test_get_user_sessions_exception PASSED [ 39%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestSaveAttempt::test_save_attempt_success PASSED [ 39%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestSaveAttempt::test_save_attempt_not_authenticated PASSED [ 40%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestSaveAttempt::test_save_attempt_exception PASSED [ 40%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestSaveAttempt::test_save_attempt_no_data_returned PASSED [ 40%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetSessionAttempts::test_get_session_attempts_success PASSED [ 40%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetSessionAttempts::test_get_session_attempts_no_data PASSED [ 41%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetSessionAttempts::test_get_session_attempts_not_authenticated PASSED [ 41%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestGetSessionAttempts::test_get_session_attempts_exception PASSED [ 41%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestIncrementSessionStats::test_increment_session_stats_success_correct PASSED [ 41%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestIncrementSessionStats::test_increment_session_stats_success_incorrect PASSED [ 42%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestIncrementSessionStats::test_increment_session_stats_session_not_found PASSED [ 42%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestIncrementSessionStats::test_increment_session_stats_not_authenticated PASSED [ 42%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestIncrementSessionStats::test_increment_session_stats_exception PASSED [ 42%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestIncrementSessionStats::test_increment_session_stats_update_returns_none PASSED [ 43%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestQuizRepositoryIntegration::test_repository_inheritance PASSED [ 43%]
tests/infrastructure/database/repositories/test_quiz_repository.py::TestQuizRepositoryIntegration::test_all_methods_require_authentication PASSED [ 43%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryCore::test_get_user_profile_success PASSED [ 43%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryCore::test_get_user_profile_not_found PASSED [ 44%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryCore::test_create_user_profile_success PASSED [ 44%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryCore::test_update_user_profile_success PASSED [ 44%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryCore::test_update_last_active_success PASSED [ 44%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryErrorHandling::test_get_user_profile_database_error PASSED [ 45%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryErrorHandling::test_create_user_profile_validation_error PASSED [ 45%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryErrorHandling::test_update_last_active_network_error PASSED [ 45%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryDataHandling::test_get_user_profile_empty_response PASSED [ 45%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryDataHandling::test_create_user_profile_with_minimal_data PASSED [ 46%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryDataHandling::test_update_last_active_no_response_data PASSED [ 46%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryDataHandling::test_user_model_conversion_accuracy PASSED [ 46%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryDataHandling::test_datetime_handling_edge_cases PASSED [ 46%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryDataHandling::test_response_handling_patterns PASSED [ 46%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryAuthentication::test_methods_blocked_when_not_authenticated PASSED [ 47%]
tests/infrastructure/database/repositories/test_user_repository.py::TestUserRepositoryAuthentication::test_authentication_check_message PASSED [ 47%]
tests/infrastructure/database/test_supabase_manager.py::TestOAuthServer::test_oauth_server_init PASSED [ 47%]
tests/infrastructure/database/test_supabase_manager.py::TestOAuthCallbackHandler::test_log_message_suppressed PASSED [ 47%]
tests/infrastructure/database/test_supabase_manager.py::TestOAuthCallbackHandler::test_do_get_favicon_request PASSED [ 48%]
tests/infrastructure/database/test_supabase_manager.py::TestOAuthCallbackHandler::test_do_get_already_authenticated PASSED [ 48%]
tests/infrastructure/database/test_supabase_manager.py::TestOAuthCallbackHandler::test_do_get_success_callback PASSED [ 48%]
tests/infrastructure/database/test_supabase_manager.py::TestOAuthCallbackHandler::test_do_get_error_callback PASSED [ 48%]
tests/infrastructure/database/test_supabase_manager.py::TestOAuthCallbackHandler::test_do_get_unknown_callback PASSED [ 49%]
tests/infrastructure/database/test_supabase_manager.py::TestStartOAuthServer::test_start_oauth_server PASSED [ 49%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerInit::test_init PASSED [ 49%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerBasicMethods::test_get_client PASSED [ 49%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerBasicMethods::test_is_authenticated_false PASSED [ 50%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerBasicMethods::test_is_authenticated_true PASSED [ 50%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerBasicMethods::test_get_session_data_none PASSED [ 50%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerBasicMethods::test_get_session_data_exists PASSED [ 50%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerBasicMethods::test_sign_out PASSED [ 51%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_save_session_not_authenticated PASSED [ 51%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_save_session_no_session_data PASSED [ 51%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_save_session_success PASSED [ 51%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_save_session_exception PASSED [ 52%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_restore_session_missing_tokens PASSED [ 52%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_restore_session_success_set_session PASSED [ 52%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_restore_session_fallback_to_refresh PASSED [ 52%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_restore_session_refresh_fails PASSED [ 53%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_restore_session_exception PASSED [ 53%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_load_persisted_session_no_data PASSED [ 53%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_load_persisted_session_success PASSED [ 53%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_load_persisted_session_restore_fails PASSED [ 53%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerSessionManagement::test_load_persisted_session_exception PASSED [ 54%]
tests/infrastructure/database/test_supabase_manager.py::TestSignInWithGoogle::test_sign_in_with_google_no_oauth_url PASSED [ 54%]
tests/infrastructure/database/test_supabase_manager.py::TestSignInWithGoogle::test_sign_in_with_google_timeout PASSED [ 54%]
tests/infrastructure/database/test_supabase_manager.py::TestSignInWithGoogle::test_sign_in_with_google_success PASSED [ 54%]
tests/infrastructure/database/test_supabase_manager.py::TestSignInWithGoogle::test_sign_in_with_google_no_code_verifier PASSED [ 55%]
tests/infrastructure/database/test_supabase_manager.py::TestSignInWithGoogle::test_sign_in_with_google_exchange_fails PASSED [ 55%]
tests/infrastructure/database/test_supabase_manager.py::TestSignInWithGoogle::test_sign_in_with_google_no_session_created PASSED [ 55%]
tests/infrastructure/database/test_supabase_manager.py::TestSignInWithGoogle::test_sign_in_with_google_server_error_result PASSED [ 55%]
tests/infrastructure/database/test_supabase_manager.py::TestSignInWithGoogle::test_sign_in_with_google_general_exception PASSED [ 56%]
tests/infrastructure/database/test_supabase_manager.py::TestValidateEnvironment::test_validate_environment_missing_url PASSED [ 56%]
tests/infrastructure/database/test_supabase_manager.py::TestValidateEnvironment::test_validate_environment_missing_key PASSED [ 56%]
tests/infrastructure/database/test_supabase_manager.py::TestValidateEnvironment::test_validate_environment_success PASSED [ 56%]
tests/infrastructure/database/test_supabase_manager.py::TestPKCEStorage::test_pkce_storage_operations PASSED [ 57%]
tests/infrastructure/database/test_supabase_manager.py::TestSupabaseManagerMarkings::test_all_public_methods_tested PASSED [ 57%]
tests/infrastructure/storage/test_session_storage.py::TestSessionStorageInit::test_init_default_app_name PASSED [ 57%]
tests/infrastructure/storage/test_session_storage.py::TestSessionStorageInit::test_init_custom_app_name PASSED [ 57%]
tests/infrastructure/storage/test_session_storage.py::TestSessionStorageInit::test_init_creates_config_directory PASSED [ 58%]
tests/infrastructure/storage/test_session_storage.py::TestGetConfigDirectory::test_get_config_directory_windows PASSED [ 58%]
tests/infrastructure/storage/test_session_storage.py::TestGetConfigDirectory::test_get_config_directory_linux_with_xdg PASSED [ 58%]
tests/infrastructure/storage/test_session_storage.py::TestGetConfigDirectory::test_get_config_directory_linux_without_xdg PASSED [ 58%]
tests/infrastructure/storage/test_session_storage.py::TestEnsureConfigDirectory::test_ensure_config_directory_creates_directory PASSED [ 59%]
tests/infrastructure/storage/test_session_storage.py::TestEnsureConfigDirectory::test_ensure_config_directory_sets_permissions_unix PASSED [ 59%]
tests/infrastructure/storage/test_session_storage.py::TestEnsureConfigDirectory::test_ensure_config_directory_no_permissions_windows PASSED [ 59%]
tests/infrastructure/storage/test_session_storage.py::TestEnsureConfigDirectory::test_ensure_config_directory_exception_handling PASSED [ 59%]
tests/infrastructure/storage/test_session_storage.py::TestSaveSession::test_save_session_success PASSED [ 60%]
tests/infrastructure/storage/test_session_storage.py::TestSaveSession::test_save_session_sets_file_permissions_unix PASSED [ 60%]
tests/infrastructure/storage/test_session_storage.py::TestSaveSession::test_save_session_no_file_permissions_windows PASSED [ 60%]
tests/infrastructure/storage/test_session_storage.py::TestSaveSession::test_save_session_atomic_operation PASSED [ 60%]
tests/infrastructure/storage/test_session_storage.py::TestSaveSession::test_save_session_cleanup_on_failure PASSED [ 61%]
tests/infrastructure/storage/test_session_storage.py::TestSaveSession::test_save_session_cleanup_exception_handling PASSED [ 61%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_success PASSED [ 61%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_file_not_exists PASSED [ 61%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_insecure_permissions PASSED [ 61%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_skip_permissions_check_windows PASSED [ 62%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_invalid_json PASSED [ 62%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_missing_session_key PASSED [ 62%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_invalid_structure PASSED [ 62%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_expired PASSED [ 63%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_file_not_found_exception PASSED [ 63%]
tests/infrastructure/storage/test_session_storage.py::TestLoadSession::test_load_session_unexpected_exception PASSED [ 63%]
tests/infrastructure/storage/test_session_storage.py::TestIsSessionExpired::test_is_session_expired_no_expires_at PASSED [ 63%]
tests/infrastructure/storage/test_session_storage.py::TestIsSessionExpired::test_is_session_expired_valid_session PASSED [ 64%]
tests/infrastructure/storage/test_session_storage.py::TestIsSessionExpired::test_is_session_expired_expired_session PASSED [ 64%]
tests/infrastructure/storage/test_session_storage.py::TestIsSessionExpired::test_is_session_expired_with_buffer PASSED [ 64%]
tests/infrastructure/storage/test_session_storage.py::TestIsSessionExpired::test_is_session_expired_exception_handling PASSED [ 64%]
tests/infrastructure/storage/test_session_storage.py::TestClearSession::test_clear_session_public_method PASSED [ 65%]
tests/infrastructure/storage/test_session_storage.py::TestClearSession::test_clear_session_private_method PASSED [ 65%]
tests/infrastructure/storage/test_session_storage.py::TestClearSession::test_clear_session_file_not_exists PASSED [ 65%]
tests/infrastructure/storage/test_session_storage.py::TestClearSession::test_clear_session_exception_handling PASSED [ 65%]
tests/infrastructure/storage/test_session_storage.py::TestHasStoredSession::test_has_stored_session_true PASSED [ 66%]
tests/infrastructure/storage/test_session_storage.py::TestHasStoredSession::test_has_stored_session_false PASSED [ 66%]
tests/infrastructure/storage/test_session_storage.py::TestGetSessionInfo::test_get_session_info_success PASSED [ 66%]
tests/infrastructure/storage/test_session_storage.py::TestGetSessionInfo::test_get_session_info_file_not_exists PASSED [ 66%]
tests/infrastructure/storage/test_session_storage.py::TestGetSessionInfo::test_get_session_info_expired_session PASSED [ 67%]
tests/infrastructure/storage/test_session_storage.py::TestGetSessionInfo::test_get_session_info_no_session_data PASSED [ 67%]
tests/infrastructure/storage/test_session_storage.py::TestGetSessionInfo::test_get_session_info_exception_handling PASSED [ 67%]
tests/infrastructure/storage/test_session_storage.py::TestSessionStorageIntegration::test_full_session_lifecycle PASSED [ 67%]
tests/infrastructure/storage/test_session_storage.py::TestSessionStorageIntegration::test_session_data_integrity PASSED [ 68%]
tests/infrastructure/storage/test_session_storage.py::TestSessionStorageIntegration::test_concurrent_access_simulation PASSED [ 68%]
tests/integration/test_integration.py::TestAdditionModeIntegration::test_addition_mode_complete_flow PASSED [ 68%]
tests/integration/test_integration.py::TestAdditionModeIntegration::test_addition_mode_unlimited_flow PASSED [ 68%]
tests/integration/test_integration.py::TestAdditionModeIntegration::test_addition_mode_error_handling PASSED [ 69%]
tests/integration/test_integration.py::TestQuizFlowIntegration::test_run_addition_quiz_complete_session PASSED [ 69%]
tests/integration/test_integration.py::TestQuizFlowIntegration::test_run_addition_quiz_early_stop PASSED [ 69%]
tests/integration/test_integration.py::TestQuizFlowIntegration::test_run_addition_quiz_with_skips_and_retries PASSED [ 69%]
tests/integration/test_integration.py::TestQuizFlowIntegration::test_run_addition_quiz_exit_command PASSED [ 69%]
tests/integration/test_integration.py::TestEndToEndFlows::test_perfect_score_session PASSED [ 70%]
tests/integration/test_integration.py::TestEndToEndFlows::test_mixed_difficulty_session PASSED [ 70%]
tests/integration/test_integration.py::TestStressTests::test_large_number_of_problems PASSED [ 70%]
tests/integration/test_integration.py::TestStressTests::test_unlimited_generator_properties PASSED [ 70%]
tests/integration/test_user_repository_integration.py::TestUserRepositoryIntegration::test_full_user_lifecycle SKIPPED [ 71%]
tests/integration/test_user_repository_integration.py::TestUserRepositoryIntegration::test_get_nonexistent_user SKIPPED [ 71%]
tests/integration/test_user_repository_integration.py::TestUserRepositoryIntegration::test_update_last_active SKIPPED [ 71%]
tests/integration/test_user_repository_integration.py::TestUserRepositoryIntegration::test_create_user_with_minimal_data SKIPPED [ 71%]
tests/integration/test_user_repository_integration.py::TestUserRepositoryIntegration::test_update_nonexistent_user SKIPPED [ 72%]
tests/integration/test_user_repository_integration.py::TestUserRepositoryIntegration::test_update_last_active_nonexistent_user SKIPPED [ 72%]
tests/integration/test_user_repository_integration.py::TestUserRepositoryPerformance::test_user_creation_performance SKIPPED [ 72%]
tests/integration/test_user_repository_integration.py::TestUserRepositoryPerformance::test_user_retrieval_performance SKIPPED [ 72%]
tests/integration/test_user_repository_integration.py::TestDatabaseSchema::test_user_profiles_table_exists SKIPPED [ 73%]
tests/integration/test_user_repository_integration.py::TestDatabaseSchema::test_user_profiles_constraints SKIPPED [ 73%]
tests/integration/test_user_repository_integration.py::TestRowLevelSecurity::test_user_can_only_access_own_data SKIPPED [ 73%]
tests/presentation/cli/test_main.py::TestMain::test_main_exit_immediately PASSED [ 73%]
tests/presentation/cli/test_main.py::TestMain::test_main_addition_mode_then_exit PASSED [ 74%]
tests/presentation/cli/test_main.py::TestMain::test_main_invalid_option_then_exit PASSED [ 74%]
tests/presentation/cli/test_main.py::TestMain::test_main_multiple_invalid_options_then_addition_then_exit PASSED [ 74%]
tests/presentation/cli/test_main.py::TestMainIfName::test_main_called_when_run_as_script PASSED [ 74%]
tests/presentation/cli/test_ui.py::TestPrintWelcome::test_print_welcome_output PASSED [ 75%]
tests/presentation/cli/test_ui.py::TestPrintMainMenu::test_print_main_menu_output PASSED [ 75%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_no_default PASSED [ 75%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_with_default_used PASSED [ 75%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_with_default_empty_input PASSED [ 76%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_with_default_whitespace_input PASSED [ 76%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_strips_whitespace PASSED [ 76%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_various_scenarios[hello-None-hello] PASSED [ 76%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_various_scenarios[hello-default-hello] PASSED [ 76%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_various_scenarios[-default-default] PASSED [ 77%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_various_scenarios[   -default-default] PASSED [ 77%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_various_scenarios[123-456-123] PASSED [ 77%]
tests/presentation/cli/test_ui.py::TestGetUserInput::test_get_user_input_various_scenarios[-None-] PASSED [ 77%]
tests/presentation/cli/test_ui.py::TestUIIntegration::test_ui_functions_dont_interfere PASSED [ 78%]
tests/presentation/cli/test_ui.py::TestUIIntegration::test_multiple_input_calls PASSED [ 78%]
tests/presentation/cli/test_ui.py::TestUIInAddition::test_display_difficulty_options PASSED [ 78%]
tests/presentation/cli/test_ui.py::TestUIInAddition::test_get_difficulty_range_valid_input PASSED [ 78%]
tests/presentation/cli/test_ui.py::TestUIInAddition::test_get_difficulty_range_invalid_then_valid PASSED [ 79%]
tests/presentation/cli/test_ui.py::TestUIInAddition::test_get_num_problems_valid PASSED [ 79%]
tests/presentation/cli/test_ui.py::TestUIInAddition::test_get_num_problems_unlimited PASSED [ 79%]
tests/presentation/cli/test_ui.py::TestUIInAddition::test_get_num_problems_invalid_then_valid PASSED [ 79%]
tests/presentation/controllers/test_addition.py::TestProblemGeneration::test_generate_single_digit_numbers PASSED [ 80%]
tests/presentation/controllers/test_addition.py::TestProblemGeneration::test_generate_two_digit_no_carrying PASSED [ 80%]
tests/presentation/controllers/test_addition.py::TestProblemGeneration::test_generate_two_digit_with_carrying PASSED [ 80%]
tests/presentation/controllers/test_addition.py::TestProblemGeneration::test_generate_three_digit_no_carrying PASSED [ 80%]
tests/presentation/controllers/test_addition.py::TestProblemGeneration::test_generate_three_digit_with_carrying PASSED [ 81%]
tests/presentation/controllers/test_addition.py::TestGenerateProblemByDifficulty::test_valid_difficulties[1] PASSED [ 81%]
tests/presentation/controllers/test_addition.py::TestGenerateProblemByDifficulty::test_valid_difficulties[2] PASSED [ 81%]
tests/presentation/controllers/test_addition.py::TestGenerateProblemByDifficulty::test_valid_difficulties[3] PASSED [ 81%]
tests/presentation/controllers/test_addition.py::TestGenerateProblemByDifficulty::test_valid_difficulties[4] PASSED [ 82%]
tests/presentation/controllers/test_addition.py::TestGenerateProblemByDifficulty::test_valid_difficulties[5] PASSED [ 82%]
tests/presentation/controllers/test_addition.py::TestGenerateProblemByDifficulty::test_invalid_difficulty PASSED [ 82%]
tests/presentation/controllers/test_addition.py::TestProblemGenerator::test_init_limited PASSED [ 82%]
tests/presentation/controllers/test_addition.py::TestProblemGenerator::test_init_unlimited PASSED [ 83%]
tests/presentation/controllers/test_addition.py::TestProblemGenerator::test_get_next_problem PASSED [ 83%]
tests/presentation/controllers/test_addition.py::TestProblemGenerator::test_has_more_problems_limited PASSED [ 83%]
tests/presentation/controllers/test_addition.py::TestProblemGenerator::test_has_more_problems_unlimited PASSED [ 83%]
tests/presentation/controllers/test_addition.py::TestProblemGenerator::test_get_progress_display_limited PASSED [ 84%]
tests/presentation/controllers/test_addition.py::TestProblemGenerator::test_get_progress_display_unlimited PASSED [ 84%]
tests/presentation/controllers/test_addition.py::TestConstants::test_difficulty_descriptions PASSED [ 84%]
tests/presentation/controllers/test_addition.py::TestPropertyBased::test_problem_generation_always_valid PASSED [ 84%]
tests/presentation/controllers/test_addition.py::TestPropertyBased::test_generator_produces_valid_problems PASSED [ 84%]
tests/presentation/controllers/test_addition.py::TestGetDifficultyRangeInputValidation::test_invalid_low_difficulty_input PASSED [ 85%]
tests/presentation/controllers/test_addition.py::TestGetDifficultyRangeInputValidation::test_high_less_than_low_difficulty PASSED [ 85%]
tests/presentation/controllers/test_addition.py::TestGetDifficultyRangeInputValidation::test_invalid_high_difficulty_input PASSED [ 85%]
tests/presentation/controllers/test_addition.py::TestRunAdditionQuizEdgeCases::test_unlimited_mode_start_message PASSED [ 85%]
tests/presentation/controllers/test_addition.py::TestRunAdditionQuizEdgeCases::test_quiz_invalid_input_handling PASSED [ 86%]
tests/presentation/controllers/test_addition_tables.py::TestGetTableRange::test_get_table_range_valid_input PASSED [ 86%]
tests/presentation/controllers/test_addition_tables.py::TestGetTableRange::test_get_table_range_same_values PASSED [ 86%]
tests/presentation/controllers/test_addition_tables.py::TestGetTableRange::test_get_table_range_low_out_of_bounds PASSED [ 86%]
tests/presentation/controllers/test_addition_tables.py::TestGetTableRange::test_get_table_range_low_too_high PASSED [ 87%]
tests/presentation/controllers/test_addition_tables.py::TestGetTableRange::test_get_table_range_high_out_of_bounds PASSED [ 87%]
tests/presentation/controllers/test_addition_tables.py::TestGetTableRange::test_get_table_range_low_greater_than_high PASSED [ 87%]
tests/presentation/controllers/test_addition_tables.py::TestGetTableRange::test_get_table_range_invalid_number_format PASSED [ 87%]
tests/presentation/controllers/test_addition_tables.py::TestGetTableRange::test_get_table_range_multiple_validation_failures PASSED [ 88%]
tests/presentation/controllers/test_addition_tables.py::TestGetOrderPreference::test_get_order_preference_sequential PASSED [ 88%]
tests/presentation/controllers/test_addition_tables.py::TestGetOrderPreference::test_get_order_preference_random PASSED [ 88%]
tests/presentation/controllers/test_addition_tables.py::TestGetOrderPreference::test_get_order_preference_invalid_choice PASSED [ 88%]
tests/presentation/controllers/test_addition_tables.py::TestGetOrderPreference::test_get_order_preference_invalid_format PASSED [ 89%]
tests/presentation/controllers/test_addition_tables.py::TestGetOrderPreference::test_get_order_preference_default_value PASSED [ 89%]
tests/presentation/controllers/test_addition_tables.py::TestGenerateAdditionTableProblems::test_generate_problems_single_number PASSED [ 89%]
tests/presentation/controllers/test_addition_tables.py::TestGenerateAdditionTableProblems::test_generate_problems_small_range PASSED [ 89%]
tests/presentation/controllers/test_addition_tables.py::TestGenerateAdditionTableProblems::test_generate_problems_medium_range PASSED [ 90%]
tests/presentation/controllers/test_addition_tables.py::TestGenerateAdditionTableProblems::test_generate_problems_order PASSED [ 90%]
tests/presentation/controllers/test_addition_tables.py::TestGenerateAdditionTableProblems::test_generate_problems_large_numbers PASSED [ 90%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTableGenerator::test_generator_init_sequential PASSED [ 90%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTableGenerator::test_generator_init_random PASSED [ 91%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTableGenerator::test_get_next_problem PASSED [ 91%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTableGenerator::test_get_next_problem_sequential_order PASSED [ 91%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTableGenerator::test_get_next_problem_out_of_bounds PASSED [ 91%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTableGenerator::test_has_more_problems PASSED [ 92%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTableGenerator::test_get_total_generated PASSED [ 92%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTableGenerator::test_get_progress_display PASSED [ 92%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_complete_all_problems PASSED [ 92%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_wrong_then_correct_answer PASSED [ 92%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_skip_problem PASSED [ 93%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_exit_command PASSED [ 93%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_stop_command PASSED [ 93%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_invalid_input_then_valid PASSED [ 93%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_multiple_problems PASSED [ 94%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_mixed_results PASSED [ 94%]
tests/presentation/controllers/test_addition_tables.py::TestRunAdditionTableQuiz::test_run_quiz_display_messages PASSED [ 94%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTablesMode::test_addition_tables_mode_success PASSED [ 94%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTablesMode::test_addition_tables_mode_single_number PASSED [ 95%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTablesMode::test_addition_tables_mode_exception_handling PASSED [ 95%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTablesMode::test_addition_tables_mode_generator_created_correctly PASSED [ 95%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTablesIntegration::test_full_problem_generation_and_solving_flow PASSED [ 95%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTablesIntegration::test_randomization_affects_order PASSED [ 96%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTablesIntegration::test_edge_case_single_problem PASSED [ 96%]
tests/presentation/controllers/test_addition_tables.py::TestAdditionTablesIntegration::test_large_range_calculation PASSED [ 96%]
tests/presentation/controllers/test_session.py::TestFormatDuration::test_seconds_only PASSED [ 96%]
tests/presentation/controllers/test_session.py::TestFormatDuration::test_minutes_and_seconds PASSED [ 97%]
tests/presentation/controllers/test_session.py::TestFormatDuration::test_hours_minutes_seconds PASSED [ 97%]
tests/presentation/controllers/test_session.py::TestFormatDuration::test_edge_cases PASSED [ 97%]
tests/presentation/controllers/test_session.py::TestShowResults::test_show_results_unlimited_session PASSED [ 97%]
tests/presentation/controllers/test_session.py::TestShowResults::test_show_results_limited_session_completed PASSED [ 98%]
tests/presentation/controllers/test_session.py::TestShowResults::test_show_results_limited_session_stopped PASSED [ 98%]
tests/presentation/controllers/test_session.py::TestShowResults::test_show_results_no_attempts PASSED [ 98%]
tests/presentation/controllers/test_session.py::TestShowResults::test_accuracy_messages[9-10-\U0001f31f Outstanding! You're a math superstar!] PASSED [ 98%]
tests/presentation/controllers/test_session.py::TestShowResults::test_accuracy_messages[8-10-\U0001f38a Excellent work! Keep it up!] PASSED [ 99%]
tests/presentation/controllers/test_session.py::TestShowResults::test_accuracy_messages[7-10-\U0001f44d Good job! Practice makes perfect!] PASSED [ 99%]
tests/presentation/controllers/test_session.py::TestShowResults::test_accuracy_messages[6-10-\U0001f4aa Keep practicing! You'll get better!] PASSED [ 99%]
tests/presentation/controllers/test_session.py::TestPromptStartSession::test_prompt_unlimited_session PASSED [ 99%]
tests/presentation/controllers/test_session.py::TestPromptStartSession::test_prompt_limited_session PASSED [100%]

=============================== warnings summary ===============================
tests/infrastructure/storage/test_session_storage.py:511
  /Users/barrymolina/Projects/mathsfun/tests/infrastructure/storage/test_session_storage.py:511: PytestUnknownMarkWarning: Unknown pytest.mark.storage - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.storage

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.13.3-final-0 _______________

Name                                                          Stmts   Miss  Cover   Missing
-------------------------------------------------------------------------------------------
src/__init__.py                                                   0      0   100%
src/config/__init__.py                                            0      0   100%
src/config/container.py                                          24      0   100%
src/domain/__init__.py                                            0      0   100%
src/domain/models/__init__.py                                     4      0   100%
src/domain/models/problem_attempt.py                             21      0   100%
src/domain/models/quiz_session.py                                40      0   100%
src/domain/models/user.py                                        15      0   100%
src/domain/services/__init__.py                                   3      0   100%
src/domain/services/quiz_service.py                              83      0   100%
src/domain/services/user_service.py                              81      2    98%   116, 120
src/infrastructure/__init__.py                                    0      0   100%
src/infrastructure/auth/__init__.py                               0      0   100%
src/infrastructure/auth/auth.py                                   0      0   100%
src/infrastructure/database/__init__.py                           0      0   100%
src/infrastructure/database/repositories/__init__.py              4      0   100%
src/infrastructure/database/repositories/base.py                 29      2    93%   24-25
src/infrastructure/database/repositories/quiz_repository.py      93      0   100%
src/infrastructure/database/repositories/user_repository.py      40      3    92%   57-59
src/infrastructure/database/supabase_manager.py                 197      4    98%   150-151, 194, 232
src/infrastructure/storage/__init__.py                            0      0   100%
src/infrastructure/storage/session_storage.py                   107      1    99%   95
src/presentation/__init__.py                                      0      0   100%
src/presentation/cli/__init__.py                                  0      0   100%
src/presentation/cli/main.py                                     73     40    45%   17-56, 72-78, 89-92, 98-99, 113, 116-121
src/presentation/cli/ui.py                                       35     14    60%   25-29, 34-35, 40-47
src/presentation/controllers/__init__.py                          0      0   100%
src/presentation/controllers/addition.py                        191      7    96%   195, 229, 236, 243-244, 258, 276
src/presentation/controllers/addition_tables.py                 130      0   100%
src/presentation/controllers/session.py                          64     15    77%   62-78
-------------------------------------------------------------------------------------------
TOTAL                                                          1234     88    93%
Coverage HTML written to dir htmlcov
================== 402 passed, 11 skipped, 1 warning in 4.26s ==================
